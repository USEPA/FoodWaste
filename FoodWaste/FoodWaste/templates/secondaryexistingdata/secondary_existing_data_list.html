{% extends "main/base.html" %}

{% block content %}
    <div class="container">

        <div class="mb-3 row">
            <h3 class="col-sm-9">Existing Data Tracking Tool</h3>
            <div class="col-sm-3">
                <button class="col-sm-12 btn btn-md btn-info" onclick="window.location.href='/secondaryexistingdata/create/'">
                    Add Existing Data
                </button>
            </div>
        </div>

        <table class="table table-bordered table-hover">
            <thead class="table-secondary">
                <tr>
                    <th scope="col">User Email</th>
                    <th scope="col">User Office/Lab</th>
                    <th scope="col">Article Title</th>
                    <th scope="col">Date Accessed</th>
                </tr>
            </thead>
            <tbody>
                {% if secondary_existing_data_list %}
                {% for data in secondary_existing_data_list %}
                <tr id="{{data.id}}" onclick="rowClick('{{data.id}}')">
                    <td scope="row">{{data.email}}</td>
                    <td>{{data.work}}</td>
                    <td>{{data.article_title}}</td>
                    <td>{{data.date_accessed}}</td>
                </tr>

                {% endfor %}
                {% else %}
                <tr><td colspan="4">No Existing Data exist!</td></tr>
                {% endif %}
            </tbody>
            <!--{#<caption>List of Secondary / Existing Data</caption>#}-->
        </table>

        <div class="row">
            <div class="col-sm-6">
                <i class="btn btn-info btn-md" onclick="viewEditSecondaryExistingData(this)" disabled>
                    View or Edit Existing Data
                </i>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script>
        function rowClick(rowId) {
            $("tr").removeClass('table-active');
            $("#" + rowId).addClass('table-active');
            $("i").removeAttr('disabled');
            $("i").attr('id', rowId);
        }
        function viewEditSecondaryExistingData(btn) {
            if ($(btn).attr('disabled')) return;
            window.location.href = '/secondaryexistingdata/detail/' + $(btn).attr('id');
        }
    </script>
{% endblock %}