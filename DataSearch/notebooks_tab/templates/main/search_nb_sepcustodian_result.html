{% extends "base/site_base_nb_tab.html" %}
{% load humanize %}
{% block nb_tab_content %}
<h3>Notebooks with Separated Notebook Custodians</h3>

<div>
{% if objs %}
	<h4>Found {{the_count}} Notebooks with Separated Notebook Custodian ({{query_show}})</h4></p>

    <table class="example table-autosort:0 table-stripeclass:alternate table-autofilter" id="nbtab_table">
		<thead id="nbtab_head">
		<tr>
			<th class="table-sortable:alphanumeric">Notebook Number</th>
			<th class="table-sortable:alphanumeric">Notebook Type</th>
            <th class="table-sortable:alphanumeric">Status</th>
			<th class="table-sortable:alphanumeric">Previous ID</th>
			<th class="table-sortable:alphanumeric">Alternate ID</th>
			<th class="table-sortable:alphanumeric">Title</th>
			<th class="table-sortable:alphanumeric">Notebook Custodian</th>
			<th class="table-sortable:date">Notebook Custodian Separation Date</th>
			<th class="table-header">ORD Contributors</th>
			<th class="table-sortable:alphanumeric">QA Manager</th>
			<th class="table-sortable:alphanumeric">Supervisor/Mentor</th>
            <th class="table-sortable:date">Date Issued</th>
			<th class="table-sortable:date">Date of Final Use</th>
			<th class="table-sortable:date">Date Archived</th>
		</tr>
		<tr>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
			<th class="table-filterable"></th>
	  	</tr>

		</thead>

		<tbody id="nb_body">

			{% for obj in objs %}
				<tr>
                    <td><a href={% url 'show_nb_tab' obj.id %}>{{obj.nb_number}}</a></td>

					<td>{{obj.nb_type}}</td>
                    <td>{{obj.status}}</td>
                    <td>{{obj.previous_id}}</td>
					<td>{{obj.alt_id}}</td>
					<td>{{obj.title}}</td>

					<td>{{obj.custodian.first_name}} {{obj.custodian.last_name}}</td>
					<td>{{obj.custodian.userprofile.date_epa_separation|date:"Y-m-d"}}</td>

					<td>{% if obj.ord_contributors.all %}<table class="example table-stripeclass:alternate table-autofilter" id="cotlp_set_table">
							<thead id="cotlp_set_head">
								<tr>
								<th class="table-sortable:alphanumeric">ORD Contributors</th>
								</tr>
								<tr>
								<th class="table-filterable"></th>
								</tr>
							</thead>

							<tbody id="cotlp_set_body">

								{% for c in obj.ord_contributors.all %}
								<tr><td>{{c.last_name}}, {{c.first_name}}</a></td></tr>
								{% endfor %}

							</tbody>
							</table>{% endif %}</td>

					<td>{{obj.qa_manager.first_name}} {{obj.qa_manager.last_name}}</td>
					<td>{{obj.supervisor_mentor.first_name}} {{obj.supervisor_mentor.last_name}}</td>

					<td>{{obj.date_issued|date:"Y-m-d"}}</td>
					<td>{{obj.date_final_use|date:"Y-m-d"}}</td>
					<td>{{obj.date_archived|date:"Y-m-d"}}</td>

				</tr>
			{% endfor %}
			</tbody>
	</table>
	{% else %}
	<table><tr><td>No Notebooks Found For This Query:</td></tr>
	<tr><td>({{query_show}})</td></tr></table>
{% endif %}
</div>


{% endblock %}