{% extends "base/site_base_qlog.html" %}
{% block qlog_content %}
{% load staticfiles %}
<h3>Create an Audit for project '{{project.title}}'</h3>
<p>
    Enter the audit information below, and then click the "Create" button.  Fields marked with an asterisk are
    required.  Existing QA activities for this project are displayed at the bottom of the page.
</p>

<form class="form-horizontal" enctype="multipart/form-data" method="post" action="." role="form" novalidate>

    {% csrf_token %}
    {{ form.non_field_errors }}
    <div class="alert">{{error_message}}</div>

    {% if form.errors %}
        <div class="alert alert-danger">
            <h5>Please correct the following errors</h5>
            {% for field in form %}
            {% if field.errors %}
            <div>{{field.label_tag}} {{ field.errors|striptags }}</div>
            {% endif %}
            {% endfor %}
        </div>
    {% endif %}


    <div class="form-group">
        <label class="col-sm-4 control-label">
            <div>{{form.audit_type.label_tag}}</div>
        </label>
        <div class="col-sm-8">
            <div>{{form.audit_type}}</div>
            {% if form.audit_type.errors %}<div class="alert alert-danger">{{form.audit_type.errors.as_text}}</div>{% endif %}
            <div class="help-block">{{form.audit_type.help_text}}</div>
        </div>
    </div>

    {% for field in form %}
    {% if field.name != 'audit_type' %}
    <div class="form-group">
        <label class="col-sm-4 control-label">
            <div>{{field.label_tag}}</div>
        </label>
        <div class="col-sm-8">
            <div>{{field}}</div>
            <div class="help-block">{{field.help_text}}</div>
            {% if field.errors %}<div class="alert alert-danger">{{field.errors.as_text}}</div>{% endif %}
        </div>
    </div>
    {% endif %}
    {% endfor %}

    <div>
        <div class="col-sm-4"></div>
        <div class="col-sm-8"><input type="submit" value="Create" class="btn btn-success"></div>
    </div>

</form>


{% if project_logs %}
<div class="vmargin20">

    <h3>Existing Project QA Activities</h3>

    <table class="example table-autosort:0 table-stripeclass:alternate table-autofilter" id="project_logs_table">
        <thead id="project_logs_head">
        <tr>
            <th class="table-sortable:alphanumeric">QA Log No.</th>
            <th class="table-header">Title</th>
            <th class="table-sortable:alphanumeric">Type</th>
            <th class="table-sortable:alphanumeric">Recommendation</th>

        </tr>
        <tr>
            <th class="table-filterable"></th>
            <th class="table-header"></th>
            <th class="table-filterable"></th>
            <th class="table-filterable"></th>


        </tr>

        </thead>

        <tbody id="project_logs_body">

        {% for obj in project_logs %}
        <tr>
            <td><a href={% url 'show_project_log' obj.id %}>{{obj.qa_log_number}}</a></td>
            <td width="200">{{obj.title}}</td>
            <td>{{obj.project_log_type.the_name}}</td>
            <td>{{obj.review_type.the_name}}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<script>
    $(".chosen-select").chosen({});
</script>
{% endif %}



{% endblock %}