{% extends "base/site_base_qlog.html" %}
{% load humanize %}

{% block qlog_content %}
<h3>Search Existing QA Activities</h3>
<div>
    To search for QA activities, click on the links below to expand search fields, select your search criteria,
    and then click the "Search" button.
</div>
<div class="vmargin20">


    <form class="form-horizontal" action="{% url 'result_search_project_log' %}" method="get">

        <div class="form-group">
            <div class="col-sm-4"></div>
            <div class="col-sm-8">
                <input class="btn btn-success" type="submit" value="Search" name="start" class="button">
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_org" data-toggle="collapse">Organization</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_org" class="collapse in">
            {% include 'organization_select.html' %}
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_qa_id_title" data-toggle="collapse">Project QA ID/QA Activity IDs/Title/STICS Number</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_qa_id_title" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">Project QA ID</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="project_qa_id" value="{{project_qa_id}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">QA Activity ID</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="qa_activity_id" value="{{qa_activity_id}}">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">Alternate ID</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="alt_id" value="{{alt_id}}">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">Previous ID</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="previous_id" value="{{previous_id}}">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">Title</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="tl" value="{{tl}}">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">STICS Clearance Tracking Number</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="lco_tracking_number" value="{{lco_tracking_number}}">
                </div>
            </div>

        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_poc_reviewer" data-toggle="collapse">Activity POC/Reviewer</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_poc_reviewer" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">QA Activity POC Last Name</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="c" value="{{c}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">QA Activity POC First Name</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="fn" value="{{fn}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label" title="The reviewer is typically the QA manager.">[?] Reviewer Last Name</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="e" value="{{e}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">Reviewer First Name</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="f" value="{{f}}">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_dates" data-toggle="collapse">Date Received/Reviewed/Approved</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_dates" class="collapse">
            <h4>Date QA Activity Received => To/From Date (For Audit Search Date Audit Began)</h4>
            <div class="form-group">
                <label class="col-sm-4 control-label">From Date</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="g" value="{{g}}" id="datepicker1">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">To Date</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="dh" value="{{dh}}" id="datepicker2">
                </div>
            </div>
            <h4>Date QA Activity Reviewed => To/From Date (For Audit Search Date Audit Report Submitted)</h4>

            <div class="form-group">
                <label class="col-sm-4 control-label">From Date</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="j" value="{{j}}" id="datepicker3">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">To Date</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="k" value="{{k}}" id="datepicker4">
                </div>
            </div>

            <h4>Date QA Activity Approved => To/From Date (For Audit Search Date Corrective Actions Completed)</h4>

            <div class="form-group">
                <label class="col-sm-4 control-label">From Date</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="m" value="{{m}}" id="datepicker5">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">To Date</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="n" value="{{n}}" id="datepicker6">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_ativity_review_type" data-toggle="collapse">Activity Type/Product Category/Recommendation/Required</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_ativity_review_type" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">QA Activity Type</label>
                <div class="col-sm-8">
                    <select class="form-control"  multiple name="r" value="{{r}}">
                        <option value="">All Types</option>
                        {% for instance in project_log_types %}
                        <option value="{{instance.the_name}}">{{instance.the_name}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">Product Category</label>
                <div class="col-sm-8">
                    <select class="form-control"  multiple name="product_categories" value="{{product_categories}}">
                        {% for instance in product_category_types %}
                        <option value="{{instance.the_name}}">{{instance.the_name}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">Review Recommendation</label>
                <div class="col-sm-8">
                    <select class="form-control"  multiple name="rt" value="{{rt}}">
                        {% for instance in review_types %}
                        <option value="{{instance.the_name}}">{{instance.the_name}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">Review Required</label>
                <div class="col-sm-8">
                    <select class="form-control" name="qa_review_required" value="{{qa_review_required}}">
                        {% for instance in YN_CHOICES_LIST %}
                        <option value="{{instance.0}}">{{instance.1}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_auditor_name_org" data-toggle="collapse">Auditor Name/Organization</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_auditor_name_org" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">Auditor</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="aud" value="{{aud}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">Auditor Organization</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="ao" value="{{ao}}">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_toggle_comments" data-toggle="collapse">Comments</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_toggle_comments" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">Comments</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="comments" value="{{comments}}">
                </div>
            </div>
        </div>


        <div class="form-group">
            <label class="col-sm-4 control-label">Export Results To Excel</label>
            <div class="col-sm-8">
                <label class="radio-inline"><input type="radio" id="bottom_Y" name="excel" value="Y">Yes</label>
                <label class="radio-inline active"><input type="radio" id="bottom_N" name="excel" value="N" checked="">No</label>
            </div>
        </div>
        <!--<div class="form-group">-->
            <!--<label class="col-sm-4 control-label">Export Results To Excel</label>-->
            <!--<div class="col-sm-8">-->
                <!--<select class="form-control"  class="form-control"  name="excel" value="{{excel}}">-->
                    <!--<option value="N">N</option>-->
                    <!--<option value="Y">Y</option>-->
                <!--</select>-->
            <!--</div>-->
        <!--</div>-->
        <div class="form-group">
            <div class="col-sm-4"></div>
            <div class="col-sm-8">
                <input class="btn btn-success" type="submit" value="Search" name="start" class="button">
            </div>
        </div>
    </form>

</div>
<script>
    $(document).ready(
                function() {
                     $("#id_lab").change(function() {
                             if ($(this).val() == '') {
                                 $("#division").html("<option>All Divisions</option>");
                             }
                             else {
                                 var url = "/projects/ajax/divisions/" + $(this).val() + "/ajax_lookup_divisions";
                                 var lab = $(this).val();
                                 $.getJSON(url, function(divisions) {
                                     var options = '<option value="">All Divisions</option>';
                                     for (var i = 0; i < divisions.length; i++) {
                                        options += '<option value="' + divisions[i].fields['abbreviation'] + '">' + divisions[i].fields['abbreviation'] + '</option>';
                                     }
                                     $("#division").html(options);
                                     $("#division").attr('disabled', false);
                                 });
                             }
                         });


    });

</script>
<script>
    $(document).ready(
                function() {
                     $("#division").change(function() {
                             if ($(this).val() == '') {
                                 $("#id_branch").html("<option>All Branches</option>");
                             }
                             else {
                                 var url = "/projects/ajax/branches/" + $(this).val() + "/ajax_lookup_branches";
                                 var division = $(this).val();
                                 $.getJSON(url, function(branches) {
                                     var options = '<option value="">All Branches</option>';
                                     for (var i = 0; i < branches.length; i++) {
                                        options += '<option value="' + branches[i].fields['abbreviation'] + '">' + branches[i].fields['abbreviation'] + '</option>';
                                     }
                                     $("#id_branch").html(options);
                                     $("#id_branch").attr('disabled', false);
                                 });
                             }
                         });


    });

</script>
{% endblock %}