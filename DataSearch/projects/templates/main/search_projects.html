{% extends "base/site_base_project.html" %}
{% load humanize %}

{% block project_content %}
<h3>Search Existing Projects</h3>
<div>
    To search for projects, click on the links below to expand search fields, select your search criteria,
    and then click the "Search" button.
</div>
<div class="vmargin20">
    <form class="form-horizontal" action="{% url 'result_search_project' %}" method="get">

        <div class="form-group">
            <div class="col-sm-4"></div>
            <div class="col-sm-1">
                <input type="submit" value="Search" name="start" class="btn btn-md btn-success">
            </div>
            <label class="col-sm-2 control-label" title="To select multiple statuses, use Ctrl-click.">[?] Project Status</label>
            <div class="col-sm-5">
                <select class="form-control"  multiple="multiple" size=4 style="height: 100%;" name="project_status" value="{{project_status}}">
                    {% for instance in project_statuses %}
                    <option {% if instance.id == selected_status.id %}selected{% endif%} value="{{instance.id}}">
                        {{instance.the_name}}
                    </option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_org" data-toggle="collapse">Organization</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_org" class="collapse in">
            {% include 'organization_select.html' %}
            <div class="form-group">
              <label class="col-sm-4 control-label">Organization search mode</label>
              <div class="col-sm-8">
                  <label class="radio-inline"><input type="radio" id="bottom_Y" name="orgr" value="projects" checked="">Project Organization</label>
                  <label class="radio-inline active"><input type="radio" id="bottom_N" name="orgr" value="contributors">Project Lead/Team Member Organization</label>
              </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_qa_id_title" data-toggle="collapse">Project QA IDs/Title</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_qa_id_title" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">Project QA ID</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="project_qa_id" value="{{project_qa_id}}">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">QA ID search mode</label>
                <div class="col-sm-8">
                    <label class="radio-inline active"><input type="radio" name="qa_id_exact" value="N" checked="">Contains</label>
                    <label class="radio-inline"><input type="radio" name="qa_id_exact" value="Y">Equals</label>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">Alternate ID</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="alt_id" value="{{alt_id}}">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">Previous ID</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="previous_id" value="{{previous_id}}">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">Title</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="f" value="{{f}}">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_people" data-toggle="collapse">Project Lead/Team Members/QA Managers</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_people" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">Last Name</label>
                <div class="col-sm-8"><input class="form-control" type="text" name="lead_lastname" value="{{lead_lastname}}"></div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">First Name</label>
                <div class="col-sm-8"><input class="form-control" type="text" name="lead_firstname" value="{{lead_firstname}}"></div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">Search for name in the following roles:</label>
                <div class="col-sm-8">
                    <label><input name="roles" type="checkbox" id="lead" value="lead" checked> Project Lead</label><br>
                    <label><input name="roles" type="checkbox" id="team_member" value="team_member" checked> Team Member</label><br>
                    <label><input name="roles" type="checkbox" id="qa_manager" value="qa_manager" checked> QA Manager</label><br>
                    <label><input name="roles" type="checkbox" id="previous_qam" value="previous_qam" checked> Previous QA Manager</label><br>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_type_category" data-toggle="collapse">Intramural or Extramural/QA Category</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_type_category" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">Intramural or Extramural</label>
                <div class="col-sm-8">
                    <select class="form-control" name="k" value="{{k}}">
                        <option value=""></option>
                        {% for instance in project_types %}
                        <option value="{{instance.the_name}}">{{instance.the_name}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">QA Category</label>
                <div class="col-sm-8">
                    <select class="form-control" multiple name="qa" value="{{qa}}">
                        {% for instance in qa_categories %}
                        <option value="{{instance.the_name}}">{{instance.the_name}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_qapp" data-toggle="collapse">QAPP</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_qapp" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">QAPP Status</label>
                <div class="col-sm-8">
                    <select class="form-control" multiple name="qs" value="{{qs}}">
                        {% for instance in qapp_statuses %}
                        <option value="{{instance.the_name}}">{{instance.the_name}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">Project Type</label>
                <div class="col-sm-8">
                    <select class="form-control" multiple name="qr" value="{{qr}}">
                        {% for instance in nrmrl_qapp_requirements %}
                        <option value="{{instance.the_name}}">{{instance.the_name}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_toggle_program" data-toggle="collapse">Program</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_toggle_program" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">Program</label>
                <div class="col-sm-8">
                    <select class="form-control" multiple name="pr" value="{{pr}}">
                        {% for instance in programs %}
                        <option value="{{instance.the_name}}">{{instance.the_name}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>

        <!--<div class="form-group">-->
            <!--<label class="col-sm-4 control-label">Keyword</label>-->
            <!--<div class="col-sm-8">-->
                <!--<input class="form-control" type="text" name="kw" value="{{kw}}">-->
            <!--</div>-->
        <!--</div>-->

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_rap" data-toggle="collapse" id='rap_toggle'>ORD RAP</a>
            </label>
        </div>
        <div id="id_rap" class="collapse">

          <div class="form-group">
              <label class="col-sm-4 control-label">
              </label>
              <div class="col-sm-8" id='rap_instructions' style='font-size:85%;'>
                (Separate values with commas or semicolons. Enter * to include all projects or tasks in a program.)
              </div>
          </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">ACE RAP Numbers</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="ace" value="{{ace}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">CSS RAP Numbers</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="css" value="{{css}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">SSWR RAP Numbers</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="sswr" value="{{sswr}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">HHRA RAP Numbers</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="hhra" value="{{hhra}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">HSRP RAP Numbers</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="hsrp" value="{{hsrp}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">HSRP RAP Extensions</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="hsre" value="{{hsre}}">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-4 control-label">SHC RAP Numbers</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="shc" value="{{shc}}">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_dates" data-toggle="collapse">Date Project Identified</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_dates" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">Date Project Identified => From Date</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="c" value="{{c}}" id="datepicker1">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">Date Project Identified => To Date</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="d" value="{{d}}" id="datepicker2">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_toggle_vehicle_type" data-toggle="collapse">Name of Contractor/Institution/Vehicle</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_toggle_vehicle_type" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">Name of Contractor/Institution</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="institution_name" value="{{institution_name}}">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">Vehicle Type</label>
                <div class="col-sm-8">
                    <select class="form-control" multiple name="vt" value="{{vt}}">
                        {% for instance in vehicle_types %}
                        <option value="{{instance.the_name}}">{{instance.the_name}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 control-label">Vehicle Number</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="vehicle_number" value="{{vehicle_number}}">
                </div>
            </div>
        </div>


        <div class="form-group">
            <label class="col-sm-4 control-label">
                <a href="#id_toggle_comments" data-toggle="collapse">Comments</a>
            </label>
            <div class="col-sm-8"></div>
        </div>
        <div id="id_toggle_comments" class="collapse">
            <div class="form-group">
                <label class="col-sm-4 control-label">Comments</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" name="comments" value="{{comments}}">
                </div>
            </div>
        </div>



        <div class="form-group">
            <label class="col-sm-4 control-label">Export Results To Excel</label>
            <div class="col-sm-8">
                <label class="radio-inline"><input type="radio" id="bottom_Y" name="excel" value="Y" onclick="excelClick(this)">Yes</label>
                <label class="radio-inline active"><input type="radio" id="bottom_N" name="excel" value="N" checked="" onclick="excelClick(this)">No</label>
            </div>
        </div>
    </form>
</div>

<script type="text/javascript">
    function excelClick(radio){
       var target_id = '';

        if (radio.name === 'excel'){
            target_id = 'bottom_'
        } else if (radio.name === 'excel2'){
            target_id = 'top_'
        }
        else {
            return;
        }

        target_id += radio.value;

        $('#' + target_id).prop('checked', true);
    }
</script>

{% endblock %}
